<!-- ==================================================================
     üì∞ NEWS VIEW TEMPLATE - –ú—ç–¥—ç—ç–Ω–∏–π –¥—ç–ª–≥—ç—Ä—ç–Ω–≥“Ø–π —Ö—É—É–¥–∞—Å
     ------------------------------------------------------------------
     Controller ‚Üí HomeController::news()

     –•“Ø–ª—ç—ç–Ω –∞–≤–∞—Ö ”©–≥”©–≥–¥–ª“Ø“Ø–¥:
       ‚Ä¢ title          - –ì–∞—Ä—á–∏–≥
       ‚Ä¢ content        - HTML –∫–æ–Ω—Ç–µ–Ω—Ç
       ‚Ä¢ photo          - –ù“Ø“Ø—Ä –∑—É—Ä–∞–≥
       ‚Ä¢ published_at   - –ù–∏–π—Ç–ª—ç–≥–¥—Å—ç–Ω –æ–≥–Ω–æ–æ
       ‚Ä¢ files[]        - –•–∞–≤—Å–∞—Ä–≥–∞—Å–∞–Ω —Ñ–∞–π–ª—É—É–¥ 
       ‚Ä¢ –≥—ç—Ö –º—ç—Ç—á–∏–ª—ç–Ω NewsModel-–∏–π–Ω ”©–≥”©–≥–ª“Ø“Ø–¥

     –û–Ω—Ü–ª–æ–≥:
       ‚úî Fancybox —Ç–æ–º—Ä—É—É–ª–¥–∞–≥ –∑—É—Ä–∞–≥
       ‚úî –ú—ç–¥—ç—ç–Ω–∏–π –æ–≥–Ω–æ–æ, –Ω–∏–π—Ç–ª—ç–≥—á —Ö–∞—Ä–∞–≥–¥–∞–Ω–∞
       ‚úî –•–∞–≤—Å—Ä–∞–ª—Ç —Ñ–∞–π–ª—É—É–¥ –∂–∞–≥—Å–∞–∞–Ω–∞
       ‚úî Typographic tuning
================================================================== -->

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0/dist/fancybox/fancybox.css">
<script defer src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0/dist/fancybox/fancybox.umd.js"></script>

<div class="container">
    <div class="row mt-4">
        <div class="text-center">
            <h2>{{ title }}</h2>
            <p class="text-muted mb-1">
                <i class="bi bi-calendar-event"></i>
                {{ published_at }}
            </p>

            {% if author is defined and author is not empty %}
            <p class="text-muted small mb-2">
                <i class="bi bi-person"></i>
                {{ author }}
            </p>
            {% endif %}
        </div>
    </div>
</div>

<style>
    .news-article > p {
        text-align: justify;
        margin: 0;
        color: black;
    }
    .news-article > dl,
    .news-article > ul,
    .news-article > ol {
        margin-bottom: 0;
    }
    .news-photo-main {
        border-radius: 4px;
        overflow: hidden;
        max-height: 480px;
    }
</style>

<div class="container news-article mt-3">
    <!-- üñº –ú—ç–¥—ç—ç–Ω–∏–π “Ø–Ω–¥—Å—ç–Ω –∑—É—Ä–∞–≥ -->
    {% if photo is not empty %}
        <div class="mb-4 text-center">
            <img class="img-fluid news-photo-main"
                 file-data-fancybox
                 src="{{ photo }}"
                 alt="{{ title|e }}">
        </div>
    {% endif %}
    
    <!-- üìÑ –ú—ç–¥—ç—ç –∫–æ–Ω—Ç–µ–Ω—Ç -->
    <div class="mt-3">
        {{ content }}
    </div>

    <!-- üìé –•–∞–≤—Å—Ä–∞–ª—Ç —Ñ–∞–π–ª—É—É–¥ (–±–∞–π–≥–∞–∞ “Ø–µ–¥) -->
    {% if files is defined and files is not empty %}
    <div class="mt-4">
        <hr>
        <h5><i class="bi bi-paperclip"></i> {{ code == 'mn' ? '–•–∞–≤—Å—Ä–∞–ª—Ç —Ñ–∞–π–ª—É—É–¥' : 'Attachments' }}</h5>
        <table class="table table-striped table-hover">
            <thead>
                <tr>
                    <th style="width:50px">#</th>
                    <th>{{ code == 'mn' ? '–§–∞–π–ª' : 'File' }}</th>
                    <th style="width:120px">{{ code == 'mn' ? '–•—ç–º–∂—ç—ç' : 'Size' }}</th>
                    <th style="width:100px">{{ code == 'mn' ? '–¢”©—Ä”©–ª' : 'Type' }}</th>
                </tr>
            </thead>
            <tbody>
                {% for file in files %}
                <tr>
                    <td>{{ loop.index }}</td>
                    <td>
                        <a href="{{ file['path'] }}" target="_blank" class="text-decoration-none">
                            {% if file['type'] == 'image' %}
                                <i class="bi bi-file-image text-success"></i>
                            {% elseif file['type'] == 'video' %}
                                <i class="bi bi-file-play text-danger"></i>
                            {% elseif file['type'] == 'audio' %}
                                <i class="bi bi-file-music text-info"></i>
                            {% elseif file['mime_content_type'] == 'application/pdf' %}
                                <i class="bi bi-file-pdf text-danger"></i>
                            {% elseif file['mime_content_type'] starts with 'application/vnd.ms-excel' or file['mime_content_type'] starts with 'application/vnd.openxmlformats-officedocument.spreadsheet' %}
                                <i class="bi bi-file-excel text-success"></i>
                            {% elseif file['mime_content_type'] starts with 'application/msword' or file['mime_content_type'] starts with 'application/vnd.openxmlformats-officedocument.wordprocessing' %}
                                <i class="bi bi-file-word text-primary"></i>
                            {% elseif file['mime_content_type'] starts with 'application/zip' or file['mime_content_type'] starts with 'application/x-rar' or file['mime_content_type'] starts with 'application/x-7z' %}
                                <i class="bi bi-file-zip text-warning"></i>
                            {% else %}
                                <i class="bi bi-file-earmark"></i>
                            {% endif %}
                            {{ file['path']|basename }}
                        </a>
                        {% if file['description'] is not empty %}
                            <small class="text-muted d-block">{{ file['description'] }}</small>
                        {% endif %}
                    </td>
                    <td>
                        {% if file['size'] < 1024 %}
                            {{ file['size'] }} B
                        {% elseif file['size'] < 1048576 %}
                            {{ (file['size'] / 1024)|round(1) }} KB
                        {% else %}
                            {{ (file['size'] / 1048576)|round(2) }} MB
                        {% endif %}
                    </td>
                    <td><span class="badge bg-secondary">{{ file['type'] }}</span></td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% endif %}

</div>

<script type="text/javascript">
    document.addEventListener('DOMContentLoaded', function () {
        Fancybox.bind('[file-data-fancybox]', {
            groupAll: true
        });
    });
</script>
